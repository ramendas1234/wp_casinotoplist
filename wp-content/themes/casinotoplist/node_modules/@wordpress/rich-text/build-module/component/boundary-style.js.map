{"version":3,"sources":["@wordpress/rich-text/src/component/boundary-style.js"],"names":["useEffect","globalStyle","document","createElement","boundarySelector","head","appendChild","BoundaryStyle","activeFormats","forwardedRef","length","element","current","querySelector","computedStyle","window","getComputedStyle","newColor","color","replace","selector","rule","style","innerHTML"],"mappings":"AAAA;;;AAGA,SAASA,SAAT,QAA0B,oBAA1B;AAEA;;;;AAGA,IAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAwB,OAAxB,CAApB;AAEA,IAAMC,gBAAgB,GAAG,mCAAzB;AAEAF,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA2BL,WAA3B;AAEA;;;;;AAIA,OAAO,SAASM,aAAT,OAA0D;AAAA,MAAhCC,aAAgC,QAAhCA,aAAgC;AAAA,MAAjBC,YAAiB,QAAjBA,YAAiB;AAChET,EAAAA,SAAS,CAAE,YAAM;AAChB;AACA;AACA,QAAK,CAAEQ,aAAF,IAAmB,CAAEA,aAAa,CAACE,MAAxC,EAAiD;AAChD;AACA;;AAED,QAAMC,OAAO,GAAGF,YAAY,CAACG,OAAb,CAAqBC,aAArB,CAAoCT,gBAApC,CAAhB;;AAEA,QAAK,CAAEO,OAAP,EAAiB;AAChB;AACA;;AAED,QAAMG,aAAa,GAAGC,MAAM,CAACC,gBAAP,CAAyBL,OAAzB,CAAtB;AACA,QAAMM,QAAQ,GAAGH,aAAa,CAACI,KAAd,CACfC,OADe,CACN,GADM,EACD,QADC,EAEfA,OAFe,CAEN,KAFM,EAEC,MAFD,CAAjB;AAGA,QAAMC,QAAQ,8BAAwBhB,gBAAxB,CAAd;AACA,QAAMiB,IAAI,+BAAyBJ,QAAzB,CAAV;AACA,QAAMK,KAAK,aAAOF,QAAP,eAAsBC,IAAtB,MAAX;;AAEA,QAAKpB,WAAW,CAACsB,SAAZ,KAA0BD,KAA/B,EAAuC;AACtCrB,MAAAA,WAAW,CAACsB,SAAZ,GAAwBD,KAAxB;AACA;AACD,GAxBQ,EAwBN,CAAEd,aAAF,CAxBM,CAAT;AAyBA,SAAO,IAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Global stylesheet shared by all RichText instances.\n */\nconst globalStyle = document.createElement( 'style' );\n\nconst boundarySelector = '*[data-rich-text-format-boundary]';\n\ndocument.head.appendChild( globalStyle );\n\n/**\n * Calculates and renders the format boundary style when the active formats\n * change.\n */\nexport function BoundaryStyle( { activeFormats, forwardedRef } ) {\n\tuseEffect( () => {\n\t\t// There's no need to recalculate the boundary styles if no formats are\n\t\t// active, because no boundary styles will be visible.\n\t\tif ( ! activeFormats || ! activeFormats.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = forwardedRef.current.querySelector( boundarySelector );\n\n\t\tif ( ! element ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst computedStyle = window.getComputedStyle( element );\n\t\tconst newColor = computedStyle.color\n\t\t\t.replace( ')', ', 0.2)' )\n\t\t\t.replace( 'rgb', 'rgba' );\n\t\tconst selector = `.rich-text:focus ${ boundarySelector }`;\n\t\tconst rule = `background-color: ${ newColor }`;\n\t\tconst style = `${ selector } {${ rule }}`;\n\n\t\tif ( globalStyle.innerHTML !== style ) {\n\t\t\tglobalStyle.innerHTML = style;\n\t\t}\n\t}, [ activeFormats ] );\n\treturn null;\n}\n"]}