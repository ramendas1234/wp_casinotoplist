"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BoundaryStyle = BoundaryStyle;

var _element = require("@wordpress/element");

/**
 * WordPress dependencies
 */

/**
 * Global stylesheet shared by all RichText instances.
 */
var globalStyle = document.createElement('style');
var boundarySelector = '*[data-rich-text-format-boundary]';
document.head.appendChild(globalStyle);
/**
 * Calculates and renders the format boundary style when the active formats
 * change.
 */

function BoundaryStyle(_ref) {
  var activeFormats = _ref.activeFormats,
      forwardedRef = _ref.forwardedRef;
  (0, _element.useEffect)(function () {
    // There's no need to recalculate the boundary styles if no formats are
    // active, because no boundary styles will be visible.
    if (!activeFormats || !activeFormats.length) {
      return;
    }

    var element = forwardedRef.current.querySelector(boundarySelector);

    if (!element) {
      return;
    }

    var computedStyle = window.getComputedStyle(element);
    var newColor = computedStyle.color.replace(')', ', 0.2)').replace('rgb', 'rgba');
    var selector = ".rich-text:focus ".concat(boundarySelector);
    var rule = "background-color: ".concat(newColor);
    var style = "".concat(selector, " {").concat(rule, "}");

    if (globalStyle.innerHTML !== style) {
      globalStyle.innerHTML = style;
    }
  }, [activeFormats]);
  return null;
}
//# sourceMappingURL=boundary-style.js.map