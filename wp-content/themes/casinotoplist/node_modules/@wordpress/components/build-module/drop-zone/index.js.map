{"version":3,"sources":["@wordpress/components/src/drop-zone/index.js"],"names":["classnames","__","useContext","useEffect","useState","useRef","upload","Icon","DropZoneConsumer","Context","useDropZone","element","onFilesDrop","onHTMLDrop","onDrop","isDisabled","withPosition","addDropZone","removeDropZone","isDraggingOverDocument","isDraggingOverElement","type","state","setState","dropZone","DropZone","props","DropZoneComponent","className","label","children","classes"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useContext, useEffect, useState, useRef } from '@wordpress/element';\nimport { upload, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { DropZoneConsumer, Context } from './provider';\n\nexport function useDropZone( {\n\telement,\n\tonFilesDrop,\n\tonHTMLDrop,\n\tonDrop,\n\tisDisabled,\n\twithPosition,\n} ) {\n\tconst { addDropZone, removeDropZone } = useContext( Context );\n\tconst [ state, setState ] = useState( {\n\t\tisDraggingOverDocument: false,\n\t\tisDraggingOverElement: false,\n\t\ttype: null,\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( ! isDisabled ) {\n\t\t\tconst dropZone = {\n\t\t\t\telement,\n\t\t\t\tonDrop,\n\t\t\t\tonFilesDrop,\n\t\t\t\tonHTMLDrop,\n\t\t\t\tsetState,\n\t\t\t\twithPosition,\n\t\t\t};\n\t\t\taddDropZone( dropZone );\n\t\t\treturn () => {\n\t\t\t\tremoveDropZone( dropZone );\n\t\t\t};\n\t\t}\n\t}, [ isDisabled, onDrop, onFilesDrop, onHTMLDrop, withPosition ] );\n\n\treturn state;\n}\n\nconst DropZone = ( props ) => (\n\t<DropZoneConsumer>\n\t\t{ ( { addDropZone, removeDropZone } ) => (\n\t\t\t<DropZoneComponent\n\t\t\t\taddDropZone={ addDropZone }\n\t\t\t\tremoveDropZone={ removeDropZone }\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t) }\n\t</DropZoneConsumer>\n);\n\nfunction DropZoneComponent( {\n\tclassName,\n\tlabel,\n\tonFilesDrop,\n\tonHTMLDrop,\n\tonDrop,\n} ) {\n\tconst element = useRef();\n\tconst { isDraggingOverDocument, isDraggingOverElement, type } = useDropZone(\n\t\t{\n\t\t\telement,\n\t\t\tonFilesDrop,\n\t\t\tonHTMLDrop,\n\t\t\tonDrop,\n\t\t}\n\t);\n\n\tlet children;\n\n\tif ( isDraggingOverElement ) {\n\t\tchildren = (\n\t\t\t<div className=\"components-drop-zone__content\">\n\t\t\t\t<Icon\n\t\t\t\t\ticon={ upload }\n\t\t\t\t\tsize=\"40\"\n\t\t\t\t\tclassName=\"components-drop-zone__content-icon\"\n\t\t\t\t/>\n\t\t\t\t<span className=\"components-drop-zone__content-text\">\n\t\t\t\t\t{ label ? label : __( 'Drop files to upload' ) }\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst classes = classnames( 'components-drop-zone', className, {\n\t\t'is-active':\n\t\t\t( isDraggingOverDocument || isDraggingOverElement ) &&\n\t\t\t( ( type === 'file' && onFilesDrop ) ||\n\t\t\t\t( type === 'html' && onHTMLDrop ) ||\n\t\t\t\t( type === 'default' && onDrop ) ),\n\t\t'is-dragging-over-document': isDraggingOverDocument,\n\t\t'is-dragging-over-element': isDraggingOverElement,\n\t\t[ `is-dragging-${ type }` ]: !! type,\n\t} );\n\n\treturn (\n\t\t<div ref={ element } className={ classes }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nexport default DropZone;\n"]}