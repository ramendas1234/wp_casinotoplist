{"version":3,"sources":["@wordpress/components/src/dropdown/index.js"],"names":["classnames","Component","createRef","Popover","Dropdown","arguments","toggle","bind","close","closeIfFocusOutside","containerRef","state","isOpen","onToggle","props","prevProps","prevState","setState","current","contains","document","activeElement","closest","onClose","renderContent","renderToggle","position","className","contentClassName","expandOnMobile","headerTitle","focusOnMount","popoverProps","args"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, createRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Popover from '../popover';\n\nclass Dropdown extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.toggle = this.toggle.bind( this );\n\t\tthis.close = this.close.bind( this );\n\t\tthis.closeIfFocusOutside = this.closeIfFocusOutside.bind( this );\n\n\t\tthis.containerRef = createRef();\n\n\t\tthis.state = {\n\t\t\tisOpen: false,\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\tconst { isOpen } = this.state;\n\t\tconst { onToggle } = this.props;\n\t\tif ( isOpen && onToggle ) {\n\t\t\tonToggle( false );\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { isOpen } = this.state;\n\t\tconst { onToggle } = this.props;\n\t\tif ( prevState.isOpen !== isOpen && onToggle ) {\n\t\t\tonToggle( isOpen );\n\t\t}\n\t}\n\n\ttoggle() {\n\t\tthis.setState( ( state ) => ( {\n\t\t\tisOpen: ! state.isOpen,\n\t\t} ) );\n\t}\n\n\t/**\n\t * Closes the dropdown if a focus leaves the dropdown wrapper. This is\n\t * intentionally distinct from `onClose` since focus loss from the popover\n\t * is expected to occur when using the Dropdown's toggle button, in which\n\t * case the correct behavior is to keep the dropdown closed. The same applies\n\t * in case when focus is moved to the modal dialog.\n\t */\n\tcloseIfFocusOutside() {\n\t\tif (\n\t\t\t! this.containerRef.current.contains( document.activeElement ) &&\n\t\t\t! document.activeElement.closest( '[role=\"dialog\"]' )\n\t\t) {\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tclose() {\n\t\tif ( this.props.onClose ) {\n\t\t\tthis.props.onClose();\n\t\t}\n\t\tthis.setState( { isOpen: false } );\n\t}\n\n\trender() {\n\t\tconst { isOpen } = this.state;\n\t\tconst {\n\t\t\trenderContent,\n\t\t\trenderToggle,\n\t\t\tposition = 'bottom',\n\t\t\tclassName,\n\t\t\tcontentClassName,\n\t\t\texpandOnMobile,\n\t\t\theaderTitle,\n\t\t\tfocusOnMount,\n\t\t\tpopoverProps,\n\t\t} = this.props;\n\n\t\tconst args = { isOpen, onToggle: this.toggle, onClose: this.close };\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'components-dropdown', className ) }\n\t\t\t\tref={ this.containerRef }\n\t\t\t>\n\t\t\t\t{ renderToggle( args ) }\n\t\t\t\t{ isOpen && (\n\t\t\t\t\t<Popover\n\t\t\t\t\t\tclassName={ contentClassName }\n\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\tonClose={ this.close }\n\t\t\t\t\t\tonFocusOutside={ this.closeIfFocusOutside }\n\t\t\t\t\t\texpandOnMobile={ expandOnMobile }\n\t\t\t\t\t\theaderTitle={ headerTitle }\n\t\t\t\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t\t\t\t{ ...popoverProps }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ renderContent( args ) }\n\t\t\t\t\t</Popover>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Dropdown;\n"]}