{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/stepper-cell/index.native.js"],"names":["AccessibilityInfo","View","Platform","__","sprintf","Component","Cell","Stepper","styles","STEP_SPEED","DEFAULT_STEP","BottomSheetStepperCell","props","announceValue","bind","onDecrementValue","onDecrementValuePressIn","onIncrementValue","onIncrementValuePressIn","onPressOut","startPressInterval","clearTimeout","timeout","clearInterval","interval","timeoutAnnounceValue","step","maxValue","onChangeValue","value","newValue","minValue","setTimeout","callback","counter","setInterval","label","OS","announceForAccessibility","icon","separatorType","isMinValue","isMaxValue","accessibilityLabel","name","event","nativeEvent","actionName","cellContainerStyles","cellRowStyles","cellLabel","defaultProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { AccessibilityInfo, View, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Cell from '../cell';\nimport Stepper from './stepper';\nimport styles from './style.scss';\n\nconst STEP_SPEED = 200;\nconst DEFAULT_STEP = 1;\n\nclass BottomSheetStepperCell extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.announceValue = this.announceValue.bind( this );\n\t\tthis.onDecrementValue = this.onDecrementValue.bind( this );\n\t\tthis.onDecrementValuePressIn = this.onDecrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onIncrementValue = this.onIncrementValue.bind( this );\n\t\tthis.onIncrementValuePressIn = this.onIncrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onPressOut = this.onPressOut.bind( this );\n\t\tthis.startPressInterval = this.startPressInterval.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t\tclearTimeout( this.timeoutAnnounceValue );\n\t}\n\n\tonIncrementValue() {\n\t\tconst { step, maxValue, onChangeValue, value } = this.props;\n\t\tconst newValue = value + step;\n\n\t\tif ( newValue <= maxValue ) {\n\t\t\tonChangeValue( newValue );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonDecrementValue() {\n\t\tconst { step, minValue, onChangeValue, value } = this.props;\n\t\tconst newValue = value - step;\n\n\t\tif ( newValue >= minValue ) {\n\t\t\tonChangeValue( newValue );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonIncrementValuePressIn() {\n\t\tthis.onIncrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onIncrementValue );\n\t\t}, 500 );\n\t}\n\n\tonDecrementValuePressIn() {\n\t\tthis.onDecrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onDecrementValue );\n\t\t}, 500 );\n\t}\n\n\tonPressOut() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t}\n\n\tstartPressInterval( callback ) {\n\t\tlet counter = 0;\n\t\tthis.interval = setInterval( () => {\n\t\t\tcallback();\n\t\t\tcounter += 1;\n\n\t\t\tif ( counter === 10 ) {\n\t\t\t\tclearInterval( this.interval );\n\t\t\t\tthis.startPressInterval( callback, STEP_SPEED / 2 );\n\t\t\t}\n\t\t}, STEP_SPEED );\n\t}\n\n\tannounceValue( value ) {\n\t\tconst { label } = this.props;\n\n\t\tif ( Platform.OS === 'ios' ) {\n\t\t\t// On Android it triggers the accessibilityLabel with the value change\n\t\t\tclearTimeout( this.timeoutAnnounceValue );\n\t\t\tthis.timeoutAnnounceValue = setTimeout( () => {\n\t\t\t\tAccessibilityInfo.announceForAccessibility(\n\t\t\t\t\t`${ value } ${ label }`\n\t\t\t\t);\n\t\t\t}, 300 );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tlabel,\n\t\t\ticon,\n\t\t\tminValue,\n\t\t\tmaxValue,\n\t\t\tvalue,\n\t\t\tseparatorType,\n\t\t} = this.props;\n\t\tconst isMinValue = value === minValue;\n\t\tconst isMaxValue = value === maxValue;\n\n\t\tconst accessibilityLabel = sprintf(\n\t\t\t/* translators: accessibility text. Inform about current value. %1$s: Control label %2$s: Current value. */\n\t\t\t__( '%1$s. Current value is %2$s' ),\n\t\t\tlabel,\n\t\t\tvalue\n\t\t);\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\taccessible={ true }\n\t\t\t\taccessibilityRole=\"adjustable\"\n\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\taccessibilityActions={ [\n\t\t\t\t\t{ name: 'increment' },\n\t\t\t\t\t{ name: 'decrement' },\n\t\t\t\t] }\n\t\t\t\tonAccessibilityAction={ ( event ) => {\n\t\t\t\t\tswitch ( event.nativeEvent.actionName ) {\n\t\t\t\t\t\tcase 'increment':\n\t\t\t\t\t\t\tthis.onIncrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'decrement':\n\t\t\t\t\t\t\tthis.onDecrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<Cell\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessible={ false }\n\t\t\t\t\tcellContainerStyle={ styles.cellContainerStyles }\n\t\t\t\t\tcellRowContainerStyle={ styles.cellRowStyles }\n\t\t\t\t\tdisabled={ true }\n\t\t\t\t\teditable={ false }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tlabelStyle={ styles.cellLabel }\n\t\t\t\t\tseparatorType={ separatorType }\n\t\t\t\t>\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisMaxValue={ isMaxValue }\n\t\t\t\t\t\tisMinValue={ isMinValue }\n\t\t\t\t\t\tonPressInDecrement={ this.onDecrementValuePressIn }\n\t\t\t\t\t\tonPressInIncrement={ this.onIncrementValuePressIn }\n\t\t\t\t\t\tonPressOut={ this.onPressOut }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t/>\n\t\t\t\t</Cell>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nBottomSheetStepperCell.defaultProps = {\n\tstep: DEFAULT_STEP,\n};\n\nexport default BottomSheetStepperCell;\n"]}