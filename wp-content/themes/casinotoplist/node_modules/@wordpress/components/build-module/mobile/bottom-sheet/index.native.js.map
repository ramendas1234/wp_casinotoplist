{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/index.native.js"],"names":["Text","View","Platform","PanResponder","Dimensions","Modal","SafeArea","Component","withPreferredColorScheme","styles","Button","Cell","PickerCell","SwitchCell","RangeCell","UnsupportedFooterCell","KeyboardAvoidingView","BottomSheet","arguments","onSafeAreaInsetsUpdate","bind","state","safeAreaBottomInset","getSafeAreaInsetsForRootView","then","safeAreaEventSubscription","addEventListener","remove","removeEventListener","result","safeAreaInsets","bottom","setState","props","title","isVisible","leftButton","rightButton","hideHeader","style","contentStyle","getStylesFromColorScheme","panResponder","create","onMoveShouldSetPanResponder","evt","gestureState","dy","getHeader","head","flex","titleContainer","separator","backgroundStyle","background","backgroundDark","bottomModal","onClose","OS","onDismiss","undefined","panHandlers","onMoveShouldSetResponder","onMoveShouldSetResponderCapture","borderColor","dragIndicator","emptyHeaderSpace","content","children","height","getWidth","Math","min","get","width","maxWidth","ThemedBottomSheet"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { Text, View, Platform, PanResponder, Dimensions } from 'react-native';\nimport Modal from 'react-native-modal';\nimport SafeArea from 'react-native-safe-area';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withPreferredColorScheme } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\nimport Button from './button';\nimport Cell from './cell';\nimport PickerCell from './picker-cell';\nimport SwitchCell from './switch-cell';\nimport RangeCell from './range-cell';\nimport UnsupportedFooterCell from './unsupported-footer-cell';\n\nimport KeyboardAvoidingView from './keyboard-avoiding-view';\n\nclass BottomSheet extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSafeAreaInsetsUpdate = this.onSafeAreaInsetsUpdate.bind( this );\n\t\tthis.state = {\n\t\t\tsafeAreaBottomInset: 0,\n\t\t};\n\n\t\tSafeArea.getSafeAreaInsetsForRootView().then(\n\t\t\tthis.onSafeAreaInsetsUpdate\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.safeAreaEventSubscription = SafeArea.addEventListener(\n\t\t\t'safeAreaInsetsForRootViewDidChange',\n\t\t\tthis.onSafeAreaInsetsUpdate\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( this.safeAreaEventSubscription === null ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.safeAreaEventSubscription.remove();\n\t\tthis.safeAreaEventSubscription = null;\n\t\tSafeArea.removeEventListener(\n\t\t\t'safeAreaInsetsForRootViewDidChange',\n\t\t\tthis.onSafeAreaInsetsUpdate\n\t\t);\n\t}\n\n\tonSafeAreaInsetsUpdate( result ) {\n\t\tif ( this.safeAreaEventSubscription === null ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { safeAreaInsets } = result;\n\t\tif ( this.state.safeAreaBottomInset !== safeAreaInsets.bottom ) {\n\t\t\tthis.setState( { safeAreaBottomInset: safeAreaInsets.bottom } );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\ttitle = '',\n\t\t\tisVisible,\n\t\t\tleftButton,\n\t\t\trightButton,\n\t\t\thideHeader,\n\t\t\tstyle = {},\n\t\t\tcontentStyle = {},\n\t\t\tgetStylesFromColorScheme,\n\t\t} = this.props;\n\n\t\tconst panResponder = PanResponder.create( {\n\t\t\tonMoveShouldSetPanResponder: ( evt, gestureState ) => {\n\t\t\t\t// Activates swipe down over child Touchables if the swipe is long enough.\n\t\t\t\t// With this we can adjust sensibility on the swipe vs tap gestures.\n\t\t\t\tif ( gestureState.dy > 3 ) {\n\t\t\t\t\tgestureState.dy = 0;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t} );\n\n\t\tconst getHeader = () => (\n\t\t\t<View>\n\t\t\t\t<View style={ styles.head }>\n\t\t\t\t\t<View style={ { flex: 1 } }>{ leftButton }</View>\n\t\t\t\t\t<View style={ styles.titleContainer }>\n\t\t\t\t\t\t<Text style={ styles.title }>{ title }</Text>\n\t\t\t\t\t</View>\n\t\t\t\t\t<View style={ { flex: 1 } }>{ rightButton }</View>\n\t\t\t\t</View>\n\t\t\t\t<View style={ styles.separator } />\n\t\t\t</View>\n\t\t);\n\n\t\tconst backgroundStyle = getStylesFromColorScheme(\n\t\t\tstyles.background,\n\t\t\tstyles.backgroundDark\n\t\t);\n\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tisVisible={ isVisible }\n\t\t\t\tstyle={ styles.bottomModal }\n\t\t\t\tanimationInTiming={ 600 }\n\t\t\t\tanimationOutTiming={ 250 }\n\t\t\t\tbackdropTransitionInTiming={ 50 }\n\t\t\t\tbackdropTransitionOutTiming={ 50 }\n\t\t\t\tbackdropOpacity={ 0.2 }\n\t\t\t\tonBackdropPress={ this.props.onClose }\n\t\t\t\tonBackButtonPress={ this.props.onClose }\n\t\t\t\tonSwipe={ this.props.onClose }\n\t\t\t\tonDismiss={\n\t\t\t\t\tPlatform.OS === 'ios' ? this.props.onDismiss : undefined\n\t\t\t\t}\n\t\t\t\tonModalHide={\n\t\t\t\t\tPlatform.OS === 'android' ? this.props.onDismiss : undefined\n\t\t\t\t}\n\t\t\t\tswipeDirection=\"down\"\n\t\t\t\tonMoveShouldSetResponder={\n\t\t\t\t\tpanResponder.panHandlers.onMoveShouldSetResponder\n\t\t\t\t}\n\t\t\t\tonMoveShouldSetResponderCapture={\n\t\t\t\t\tpanResponder.panHandlers.onMoveShouldSetResponderCapture\n\t\t\t\t}\n\t\t\t\tonAccessibilityEscape={ this.props.onClose }\n\t\t\t>\n\t\t\t\t<KeyboardAvoidingView\n\t\t\t\t\tbehavior={ Platform.OS === 'ios' && 'padding' }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t...backgroundStyle,\n\t\t\t\t\t\tborderColor: 'rgba(0, 0, 0, 0.1)',\n\t\t\t\t\t\t...style,\n\t\t\t\t\t} }\n\t\t\t\t\tkeyboardVerticalOffset={ -this.state.safeAreaBottomInset }\n\t\t\t\t>\n\t\t\t\t\t<View style={ styles.dragIndicator } />\n\t\t\t\t\t{ hideHeader && <View style={ styles.emptyHeaderSpace } /> }\n\t\t\t\t\t{ ! hideHeader && getHeader() }\n\t\t\t\t\t<View style={ [ styles.content, contentStyle ] }>\n\t\t\t\t\t\t{ this.props.children }\n\t\t\t\t\t</View>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={ { height: this.state.safeAreaBottomInset } }\n\t\t\t\t\t/>\n\t\t\t\t</KeyboardAvoidingView>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nfunction getWidth() {\n\treturn Math.min(\n\t\tDimensions.get( 'window' ).width,\n\t\tstyles.background.maxWidth\n\t);\n}\n\nconst ThemedBottomSheet = withPreferredColorScheme( BottomSheet );\n\nThemedBottomSheet.getWidth = getWidth;\nThemedBottomSheet.Button = Button;\nThemedBottomSheet.Cell = Cell;\nThemedBottomSheet.PickerCell = PickerCell;\nThemedBottomSheet.SwitchCell = SwitchCell;\nThemedBottomSheet.RangeCell = RangeCell;\nThemedBottomSheet.UnsupportedFooterCell = UnsupportedFooterCell;\n\nexport default ThemedBottomSheet;\n"]}