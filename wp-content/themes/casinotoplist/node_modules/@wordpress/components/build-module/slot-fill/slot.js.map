{"version":3,"sources":["@wordpress/components/src/slot-fill/slot.js"],"names":["isFunction","isString","map","negate","Children","Component","cloneElement","isEmptyElement","Consumer","SlotComponent","arguments","bindNode","bind","registerSlot","props","name","unregisterSlot","prevProps","node","children","bubblesVirtually","fillProps","getFills","className","fills","fill","fillKey","occurrence","fillChildren","child","childIndex","childKey","key","filter","Slot"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isFunction, isString, map, negate } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tChildren,\n\tComponent,\n\tcloneElement,\n\tisEmptyElement,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { Consumer } from './context';\n\nclass SlotComponent extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindNode = this.bindNode.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { registerSlot } = this.props;\n\n\t\tregisterSlot( this.props.name, this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tconst { unregisterSlot } = this.props;\n\n\t\tunregisterSlot( this.props.name, this );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { name, unregisterSlot, registerSlot } = this.props;\n\n\t\tif ( prevProps.name !== name ) {\n\t\t\tunregisterSlot( prevProps.name );\n\t\t\tregisterSlot( name, this );\n\t\t}\n\t}\n\n\tbindNode( node ) {\n\t\tthis.node = node;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tchildren,\n\t\t\tname,\n\t\t\tbubblesVirtually = false,\n\t\t\tfillProps = {},\n\t\t\tgetFills,\n\t\t\tclassName,\n\t\t} = this.props;\n\n\t\tif ( bubblesVirtually ) {\n\t\t\treturn <div ref={ this.bindNode } className={ className } />;\n\t\t}\n\n\t\tconst fills = map( getFills( name, this ), ( fill ) => {\n\t\t\tconst fillKey = fill.occurrence;\n\t\t\tconst fillChildren = isFunction( fill.children )\n\t\t\t\t? fill.children( fillProps )\n\t\t\t\t: fill.children;\n\n\t\t\treturn Children.map( fillChildren, ( child, childIndex ) => {\n\t\t\t\tif ( ! child || isString( child ) ) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\n\t\t\t\tconst childKey = `${ fillKey }---${ child.key || childIndex }`;\n\t\t\t\treturn cloneElement( child, { key: childKey } );\n\t\t\t} );\n\t\t} ).filter(\n\t\t\t// In some cases fills are rendered only when some conditions apply.\n\t\t\t// This ensures that we only use non-empty fills when rendering, i.e.,\n\t\t\t// it allows us to render wrappers only when the fills are actually present.\n\t\t\tnegate( isEmptyElement )\n\t\t);\n\n\t\treturn <>{ isFunction( children ) ? children( fills ) : fills }</>;\n\t}\n}\n\nconst Slot = ( props ) => (\n\t<Consumer>\n\t\t{ ( { registerSlot, unregisterSlot, getFills } ) => (\n\t\t\t<SlotComponent\n\t\t\t\t{ ...props }\n\t\t\t\tregisterSlot={ registerSlot }\n\t\t\t\tunregisterSlot={ unregisterSlot }\n\t\t\t\tgetFills={ getFills }\n\t\t\t/>\n\t\t) }\n\t</Consumer>\n);\n\nexport default Slot;\n"]}